<!DOCTYPE html>
<html lang="en">

<head>
    <%- include('partials/head.ejs') %>

        <script>

            'use strict';

            $(async function () {

                const parsedPoll = JSON.parse('<%- poll %>');

                console.log(parsedPoll);

                $('#title').text(parsedPoll.title);

                let grades = await get('/polls/grades');


                let row = $('<div>').addClass('row');
                row.append($('<div>').addClass('col'));
                for (let choice of parsedPoll.choices) {

                    row.append($('<div>').addClass('col').text(choice.name));

                }
                $('#choices').append(row);

                for (let grade of grades) {

                    row = $('<div>').addClass('row');
                    row.append($('<div>').addClass('col').text(grade.value));

                    for (let choice of parsedPoll.choices) {

                        let col = $('<div>').addClass('col');
                        col.append($('<input type="radio" required>').attr('name', choice.id));
                        row.append(col);

                    }

                    $('#choices').append(row);

                }

            });


        </script>

</head>


<body>

    <div class="container">

        <div class="row">

            <nav>

                <a href="/">home</a>

            </nav>

            <div class="col">

            </div>
        </div>

        <br>

        <div class="row">

            <div class="col">

                <h2 id="title"></h2>
                <br>

                <form>

                    <div id="choices"></div>

                    <br>
                    <button type="button" class="btn-dark">submit</button>

                </form>
            </div>
        </div>


    </div>

</body>

</html>